// data array
const images = [
    {
        src: 'gallery/images/DSC_5475 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5608 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5637 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5793.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5806 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5859 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5881 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5901 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5916 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5933 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5938 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5940 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_5967 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6006 - Copy.jpg',
        alt: '',
        title: 'Foto',
        category: 'All, Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6025.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6053.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6069.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6091.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6113.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6126.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6128.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6130.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6132.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6134.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6137.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6141.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6159.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC_6311.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC00403.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC00456.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC00463.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC00495.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08727.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08757.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08767.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08770.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08771.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08774.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/DSC08776.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_4901.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5203.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5213.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5231.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5249.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5265.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5285.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5291.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5314.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5332.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5339.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5361.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5375.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5400.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5411.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5429.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5447.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5454.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5488.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_5631.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_6165.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_6293.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/RPY_6356.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan Sekolah'
    },
    {
        src: 'gallery/images/Pertemuan 1.jpg',
        alt: '',
        title: 'Foto',
        category: 'Dokumentasi Kegiatan 3MEDIA'
    },
    
];

// function to shuffle array 
function shuffleArray(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
    return array
}

// function to get the current page type 

function getPageType() {
    const path = window.location.pathname;
    if (path.includes('gallery.html')) {
        return 'all';
    } else if (path.includes('Dokumentasi Kegiatan 3MEDIA.html')) {
        return 'Dokumentasi Kegiatan 3MEDIA';
    } else if (path.includes('Dokumentasi Kegiatan Sekolah.html')) {
        return 'Dokumentasi Kegiatan Sekolah';
    } else if (path.includes('Video Kegiatan 3MEDIA.html')) {
        return 'Video';
    } else {
        return 'all';
    }
}

// function to filter images based on category 
function filterImages(images, category) {
    if (category === 'all') return images;
    return images.filter(image => image.category.split('.').map(c => c.trim()).includes(category));
}

// get current page type 
const pageType = getPageType();

// Filter images based on page type 
const filteredImages = filterImages(images, pageType);

// shuffled filtered images 
const shuffledFilteredImages = shuffleArray(filteredImages);




// get the container element 
const container = document.getElementById('card-container');

// Create and append card elements 
shuffledFilteredImages.forEach(items => {
    // Create card element 
    const card = document.createElement('div');
    card.classList.add('card');

    let video;

    // Check if the item is an image or video 
    if(items.src.endsWith('mp4')) {
        // Create video element 
        video = document.createElement('video');
        const videoIcon = document.createElement('i');
        videoIcon.classList.add('ai-video');
        video.src = items.src;
        video.alt = items.alt;
        video.muted = true;

        card.appendChild(video);
        card.appendChild(videoIcon);

        card.addEventListener('mouseenter', () => {
            video.play();
        });

        card.addEventListener('mouseleave', () => {
            video.pause();
        })
    } else {
        // Create image element 
        const img = document.createElement('img');
        img.src = items.src;
        img.alt = items.alt;

        // append image to card 
        card.appendChild(img)
    }

    // Create title element 
    const title = document.createElement('h5');
    title.textContent = items.title;

    // append title to card 
    card.appendChild(title);

    container.appendChild(card);

    card.addEventListener('click', () => {
        openLightbox(items.src, items.title);
    })
})


// Get lightbox elements 
const lightbox = document.getElementById('lightbox'),
lightboxClose = document.getElementById('lightbox-close'),
lightboxCntent = document.getElementById('lightbox-content');

// function to open lightbox 
function openLightbox(src, title) {
    // clear previous content 
    lightboxCntent.innerHTML = '';

    const titleText = document.createElement('h5');
    

    if (src.endsWith('.mp4')) {
        // create video element for lightbox 
        const video = document.createElement('video');
        video.src = src;
        video.controls = true;
        video.autoplay = true;

        // append video element to lightbox 
        lightboxCntent.appendChild(video);
    } else {
        // create image Element 
        const img = document.createElement('img');
        img.src = src;
        img.alt = title;

        // append image to lightbox 
        lightboxCntent.appendChild(img);
    }

    // set title 
    titleText.textContent = title;
    lightboxCntent.appendChild(titleText);

    // display lightbox 
    lightbox.style.display = 'flex';
}

// function to close lightbox 
lightboxClose.addEventListener('click', () => {
    lightbox.style.display = 'none';
});

// close lightbox when clicking outside of the content 

lightbox.addEventListener('click', (e) => {
    const video = lightboxCntent.querySelector('video');
    
    // if a video element is found, pause the video 
    if (video) {
        video.pause();
    }
    if (e.target === lightbox) {
        lightbox.style.display = 'none';
    }
})